import{f as S,e as re,w as b,L as ie}from"./index-ad0260cc.js";var fe=Object.defineProperty,ce=(t,e,n)=>e in t?fe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,d=(t,e,n)=>(ce(t,typeof e!="symbol"?e+"":e,n),n),E=(t=>(t.Empty="empty",t.Value="value",t.Range="range",t.EveryX="everyX",t.Combined="combined",t.NoSpecific="noSpecific",t))(E||{}),T=(t=>(t.Prefix="prefix",t.Suffix="suffix",t.Text="text",t))(T||{});class pe{constructor(e){d(this,"field"),d(this,"itemMap"),this.field=e,this.itemMap=this.field.items.reduce((n,r)=>(n[r.value]=r,n),{})}get id(){return this.field.id}get items(){return this.field.items}get onChange(){return this.field.onChange}get segmentFactories(){return this.field.segmentFactories}get min(){return this.items[0].value}get max(){return this.items[this.items.length-1].value}getItem(e){return this.itemMap[e]}}function de(t,e,n=1){const r=[];for(let i=t;i<=e;i+=n)r.push(i);return r}class me{constructor(e,n,r=1){return d(this,"start"),d(this,"end"),d(this,"step"),this.start=e,this.end=n,this.step=r,new Proxy(this,{get:function(i,a){const s=typeof a=="string"?parseInt(a):a;return typeof s=="number"&&s>=0&&s<=i.length?i.start+i.step*s:Reflect.get(i,a)}})}get length(){return(this.end-this.start)/this.step+1}[Symbol.iterator](){let e=-1;return{next:()=>({value:this[++e],done:this[e+1]===void 0})}}}function I(t,e,n=i=>i+"",r=i=>i+""){const i=[];for(const a of new me(t,e))i.push({text:n(a),alt:r(a),value:a});return i}function he(t){return{secondItems:I(0,59,e=>N(e,2)),minuteItems:I(0,59,e=>N(e,2)),hourItems:I(0,23,e=>N(e,2)),dayItems:I(1,31),monthItems:I(1,12,e=>new Date(2021,e-1,1).toLocaleDateString(t,{month:"long"}),e=>new Date(2021,e-1,1).toLocaleDateString(t,{month:"short"})),dayOfWeekItems:I(0,6,e=>new Date(2021,0,3+e).toLocaleDateString(t,{weekday:"long"}),e=>new Date(2021,0,3+e).toLocaleDateString(t,{weekday:"short"}))}}function N(t,e){const n=t+"";return n.length<e?new Array(e-n.length).fill("0").join("")+t:n}function R(t){return t&&typeof t=="object"&&!Array.isArray(t)}function Q(t,...e){if(!R(t)||e.length===0)return;const n=e.shift();if(R(n))for(const[r,i]of Object.entries(n))R(i)?(R(t[r])||(t[r]={}),Q(t[r],n[r])):t[r]=n[r];return e.length>0&&Q(t,e),t}function ae(t,...e){if(e.length===0)return t;for(const n of e[0])if(n in t){const r=ae(t[n],...e.slice(1));if(r!==void 0)return r}}function xe(t){for(let e=1;e<t.length;e++)if(t[e-1]+1!==t[e])return!1;return!0}function ve(){throw new Error("not implemented")}function ye(t,e,n=!0){const r=[];for(let i=0;i<t.length;i+=e){const a=t.slice(i,i+e);for(;n&&a.length<e;)a.push(null);r.push(a)}return r}class F{constructor(e){d(this,"field"),d(this,"type",E.NoSpecific),this.field=e}toCron(){return"?"}toArray(){return[]}get items(){return{}}static fromString(e,n){return e!=="?"?null:new F(n)}}class V{constructor(e){d(this,"field"),d(this,"type",E.Empty),this.field=e}toCron(){return"*"}toArray(){return[]}get items(){return{}}static fromString(e,n){return e!=="*"?null:new V(n)}static fromArray(e,n){const{items:r}=n;if(e.length===0)return new V(n);if(e.length!==r.length)return null;for(const i of r)if(!e.includes(i.value))return null;return xe(r.map(i=>i.value))?new V(n):null}}const se=class Z{constructor(e,n,r){d(this,"field"),d(this,"type",E.Range),d(this,"start"),d(this,"end"),this.field=e,this.start=n,this.end=r}toCron(){return`${this.start}-${this.end}`}toArray(){const e=this.start,n=this.end;return de(e,n)}get items(){return{start:this.field.itemMap[this.start],end:this.field.itemMap[this.end]}}static fromString(e,n){if(!Z.re.test(e))return null;const{min:r,max:i}=n,a=e.split("-"),s=parseInt(a[0]),l=parseInt(a[1]);return s>l||s<r||l>i?null:new Z(n,s,l)}};d(se,"re",/^\d+-\d+$/);let z=se;const K=(t,e,n)=>{const r=t*Math.floor(e/t),i=[];for(let a=r;a<=n;a+=t)a>=e&&i.push(a);return i},oe=class X{constructor(e,n){d(this,"field"),d(this,"type",E.EveryX),d(this,"every"),this.field=e,this.every=n}toCron(){return`*/${this.every}`}toArray(){const{min:e,max:n}=this.field;return K(this.every,e,n)}get items(){return{every:this.field.itemMap[this.every]}}static fromString(e,n){if(!X.re.test(e))return null;const[,r]=e.split("/"),i=parseInt(r),{min:a,max:s}=n;return K(i,a,s).length==0?null:new X(n,i)}static fromArray(e,n){const{min:r,max:i}=n;if(e.length<3)return null;const a=e[1]-e[0];if(a<=1)return null;const s=r%a===0?r:(Math.floor(r/a)+1)*a;if(e.length!==Math.floor((i-s)/a)+1)return null;for(const l of e)if(l%a!==0)return null;return new X(n,a)}};d(oe,"re",/^\*\/\d+$/);let H=oe;class L{constructor(e,n){d(this,"field"),d(this,"type",E.Value),d(this,"value"),this.field=e,this.value=n}toCron(){return`${this.value}`}toArray(){return[this.value]}get items(){return{value:this.field.itemMap[this.value]}}static fromString(e,n){const{min:r,max:i}=n,a=parseInt(e);return String(a)===e&&a>=r&&a<=i?new L(n,a):null}static fromArray(e,n){const{min:r,max:i}=n;if(e.length!=1)return null;const a=e[0];return a<r||a>i?null:a}}const le=class ${constructor(e,n=[]){d(this,"field"),d(this,"segments"),this.field=e,this.segments=n}get type(){return this.segments.length==1?this.segments[0].type:E.Range}addSegment(e){this.segments.push(e)}toCron(){return this.segments.map(e=>e.toCron()).join(",")}toArray(){const e=new Set;for(const n of this.segments)n.toArray().forEach(r=>e.add(r));return Array.from(e)}get items(){return ve()}static fromString(e,n){const r=n.segmentFactories??$.segmentFactories;let i=[];for(const a of e.split(",")){if(a==="*"){i=[new V(n)];break}let s=null;for(const l of r)if(s=l(a,n),s!==null)break;if(s===null)return null;i.push(s)}return new $(n,i)}static fromArray(e,n){const{min:r,max:i}=n,a=e[0],s=e[e.length-1];if(a<r||s>i)return null;const l=[];let u=0;for(let f=0;f<e.length;f++)(e[f+1]===void 0||e[f+1]-e[f]>1)&&(f===u?l.push(new L(n,e[u])):l.push(new z(n,e[u],e[f])),u=f+1);return new $(n,l)}};d(le,"segmentFactories",[V.fromString,H.fromString,z.fromString,L.fromString]);let Y=le;function _(t,e){return Y.fromString(t,e)}function ge(t,e){for(const n of[V.fromArray,H.fromArray,Y.fromArray]){const r=n(t,e);if(r!=null)return r}return null}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var we=Object.prototype.toString,U=Array.isArray||function(t){return we.call(t)==="[object Array]"};function G(t){return typeof t=="function"}function Se(t){return U(t)?"array":typeof t}function J(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function ee(t,e){return t!=null&&typeof t=="object"&&e in t}function ke(t,e){return t!=null&&typeof t!="object"&&t.hasOwnProperty&&t.hasOwnProperty(e)}var be=RegExp.prototype.test;function Ce(t,e){return be.call(t,e)}var Oe=/\S/;function We(t){return!Ce(Oe,t)}var je={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Ve(t){return String(t).replace(/[&<>"'`=\/]/g,function(e){return je[e]})}var Ae=/\s*/,Me=/\s+/,te=/\s*=/,Te=/\s*\}/,Ee=/#|\^|\/|>|\{|&|=|!/;function Ie(t,e){if(!t)return[];var n=!1,r=[],i=[],a=[],s=!1,l=!1,u="",f=0;function h(){if(s&&!l)for(;a.length;)delete i[a.pop()];else a=[];s=!1,l=!1}var y,x,W;function j(C){if(typeof C=="string"&&(C=C.split(Me,2)),!U(C)||C.length!==2)throw new Error("Invalid tags: "+C);y=new RegExp(J(C[0])+"\\s*"),x=new RegExp("\\s*"+J(C[1])),W=new RegExp("\\s*"+J("}"+C[1]))}j(e||O.tags);for(var o=new q(t),p,m,v,A,M,c;!o.eos();){if(p=o.pos,v=o.scanUntil(y),v)for(var g=0,w=v.length;g<w;++g)A=v.charAt(g),We(A)?(a.push(i.length),u+=A):(l=!0,n=!0,u+=" "),i.push(["text",A,p,p+1]),p+=1,A===`
`&&(h(),u="",f=0,n=!1);if(!o.scan(y))break;if(s=!0,m=o.scan(Ee)||"name",o.scan(Ae),m==="="?(v=o.scanUntil(te),o.scan(te),o.scanUntil(x)):m==="{"?(v=o.scanUntil(W),o.scan(Te),o.scanUntil(x),m="&"):v=o.scanUntil(x),!o.scan(x))throw new Error("Unclosed tag at "+o.pos);if(m==">"?M=[m,v,p,o.pos,u,f,n]:M=[m,v,p,o.pos],f++,i.push(M),m==="#"||m==="^")r.push(M);else if(m==="/"){if(c=r.pop(),!c)throw new Error('Unopened section "'+v+'" at '+p);if(c[1]!==v)throw new Error('Unclosed section "'+c[1]+'" at '+p)}else m==="name"||m==="{"||m==="&"?l=!0:m==="="&&j(v)}if(h(),c=r.pop(),c)throw new Error('Unclosed section "'+c[1]+'" at '+o.pos);return De(Le(i))}function Le(t){for(var e=[],n,r,i=0,a=t.length;i<a;++i)n=t[i],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(e.push(n),r=n));return e}function De(t){for(var e=[],n=e,r=[],i,a,s=0,l=t.length;s<l;++s)switch(i=t[s],i[0]){case"#":case"^":n.push(i),r.push(i),n=i[4]=[];break;case"/":a=r.pop(),a[5]=i[2],n=r.length>0?r[r.length-1][4]:e;break;default:n.push(i)}return e}function q(t){this.string=t,this.tail=t,this.pos=0}q.prototype.eos=function(){return this.tail===""};q.prototype.scan=function(t){var e=this.tail.match(t);if(!e||e.index!==0)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};q.prototype.scanUntil=function(t){var e=this.tail.search(t),n;switch(e){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,e),this.tail=this.tail.substring(e)}return this.pos+=n.length,n};function D(t,e){this.view=t,this.cache={".":this.view},this.parent=e}D.prototype.push=function(t){return new D(t,this)};D.prototype.lookup=function(t){var e=this.cache,n;if(e.hasOwnProperty(t))n=e[t];else{for(var r=this,i,a,s,l=!1;r;){if(t.indexOf(".")>0)for(i=r.view,a=t.split("."),s=0;i!=null&&s<a.length;)s===a.length-1&&(l=ee(i,a[s])||ke(i,a[s])),i=i[a[s++]];else i=r.view[t],l=ee(r.view,t);if(l){n=i;break}r=r.parent}e[t]=n}return G(n)&&(n=n.call(this.view)),n};function k(){this.templateCache={_cache:{},set:function(t,e){this._cache[t]=e},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}k.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};k.prototype.parse=function(t,e){var n=this.templateCache,r=t+":"+(e||O.tags).join(":"),i=typeof n<"u",a=i?n.get(r):void 0;return a==null&&(a=Ie(t,e),i&&n.set(r,a)),a};k.prototype.render=function(t,e,n,r){var i=this.getConfigTags(r),a=this.parse(t,i),s=e instanceof D?e:new D(e,void 0);return this.renderTokens(a,s,n,t,r)};k.prototype.renderTokens=function(t,e,n,r,i){for(var a="",s,l,u,f=0,h=t.length;f<h;++f)u=void 0,s=t[f],l=s[0],l==="#"?u=this.renderSection(s,e,n,r,i):l==="^"?u=this.renderInverted(s,e,n,r,i):l===">"?u=this.renderPartial(s,e,n,i):l==="&"?u=this.unescapedValue(s,e):l==="name"?u=this.escapedValue(s,e,i):l==="text"&&(u=this.rawValue(s)),u!==void 0&&(a+=u);return a};k.prototype.renderSection=function(t,e,n,r,i){var a=this,s="",l=e.lookup(t[1]);function u(y){return a.render(y,e,n,i)}if(l){if(U(l))for(var f=0,h=l.length;f<h;++f)s+=this.renderTokens(t[4],e.push(l[f]),n,r,i);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")s+=this.renderTokens(t[4],e.push(l),n,r,i);else if(G(l)){if(typeof r!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(e.view,r.slice(t[3],t[5]),u),l!=null&&(s+=l)}else s+=this.renderTokens(t[4],e,n,r,i);return s}};k.prototype.renderInverted=function(t,e,n,r,i){var a=e.lookup(t[1]);if(!a||U(a)&&a.length===0)return this.renderTokens(t[4],e,n,r,i)};k.prototype.indentPartial=function(t,e,n){for(var r=e.replace(/[^ \t]/g,""),i=t.split(`
`),a=0;a<i.length;a++)i[a].length&&(a>0||!n)&&(i[a]=r+i[a]);return i.join(`
`)};k.prototype.renderPartial=function(t,e,n,r){if(n){var i=this.getConfigTags(r),a=G(n)?n(t[1]):n[t[1]];if(a!=null){var s=t[6],l=t[5],u=t[4],f=a;l==0&&u&&(f=this.indentPartial(a,u,s));var h=this.parse(f,i);return this.renderTokens(h,e,n,f,r)}}};k.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(n!=null)return n};k.prototype.escapedValue=function(t,e,n){var r=this.getConfigEscape(n)||O.escape,i=e.lookup(t[1]);if(i!=null)return typeof i=="number"&&r===O.escape?String(i):r(i)};k.prototype.rawValue=function(t){return t[1]};k.prototype.getConfigTags=function(t){return U(t)?t:t&&typeof t=="object"?t.tags:void 0};k.prototype.getConfigEscape=function(t){if(t&&typeof t=="object"&&!U(t))return t.escape};var O={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){P.templateCache=t},get templateCache(){return P.templateCache}},P=new k;O.clearCache=function(){return P.clearCache()};O.parse=function(t,e){return P.parse(t,e)};O.render=function(t,e,n,r){if(typeof t!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+Se(t)+'" was given as the first argument for mustache#render(template, view, partials)');return P.render(t,e,n,r)};O.escape=Ve;O.Scanner=q;O.Context=D;O.Writer=k;const ne={"*":{prefix:"每",suffix:"",text:"未知","*":{empty:{text:"每 {{field.id}}"},value:{text:"{{value.text}}"},range:{text:"{{start.text}}-{{end.text}}"},everyX:{text:"每 {{every.value}}"}},month:{"*":{prefix:"的"},empty:{text:"每月"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"}},day:{"*":{prefix:"的"},empty:{text:"每日"},value:{text:"{{value.alt}}号"},range:{text:"{{start.alt}}号-{{end.alt}}号"}},dayOfWeek:{"*":{prefix:"的"},empty:{text:"一周的每一天"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"}},hour:{"*":{prefix:"的"},empty:{text:"每小时"}},minute:{"*":{prefix:":"},empty:{text:"每分钟"}}},minute:{text:"分"},hour:{text:"小时",minute:{"*":{prefix:":",suffix:"分钟"},empty:{text:"每"}}},day:{text:"天"},week:{text:"周",dayOfWeek:{"*":{prefix:"的"},empty:{text:"每天"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"}}},month:{text:"月",dayOfWeek:{"*":{prefix:"和"}},day:{"*":{prefix:"的"}}},year:{text:"年",dayOfWeek:{"*":{prefix:"和"}}}},Ue={"*":{prefix:"Hver",suffix:"",text:"Ukendt","*":{empty:{text:"hver {{field.id}}"},value:{text:"{{value.text}}"},range:{text:"{{start.text}}-{{end.text}}"},everyX:{text:"hver {{every.value}}"}},month:{"*":{prefix:"i"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"}},day:{"*":{prefix:"på"}},dayOfWeek:{"*":{prefix:"på"},empty:{text:"hver dag i ugen"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"}},hour:{"*":{prefix:"klokken"}},minute:{"*":{prefix:":"}}},minute:{text:"Minut"},hour:{text:"Time",minute:{"*":{prefix:"på de(t)",suffix:"minutter"},empty:{text:"hver"}}},day:{text:"Dag"},week:{text:"Uge"},month:{text:"Måned",dayOfWeek:{"*":{prefix:"og"}}},year:{text:"År",dayOfWeek:{"*":{prefix:"og"}}}},Pe={"*":{prefix:"Jede",suffix:"",text:"Unknown","*":{value:{text:"{{value.text}}"},range:{text:"{{start.text}}-{{end.text}}"},everyX:{text:"alle {{every.value}}"}},month:{"*":{prefix:"im"},empty:{prefix:"in",text:"jedem Monat"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"}},day:{"*":{prefix:"den"},empty:{prefix:"an",text:"jedem Tag"},everyX:{prefix:"",text:"alle {{every.value}} Tage"},noSpecific:{prefix:"an",text:"keinem bestimmten Tag"}},dayOfWeek:{"*":{prefix:"am"},empty:{prefix:"an",text:"jedem Wochentag"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"},noSpecific:{prefix:"und",text:"keinem bestimmten Wochentag"}},hour:{"*":{prefix:"um"},empty:{prefix:"zu",text:"jeder Stunde"},everyX:{prefix:"",text:"alle {{every.value}} Stunden"}},minute:{"*":{prefix:":"},empty:{text:"jede Minute"},everyX:{prefix:"",text:"alle {{every.value}} Minuten"}},second:{"*":{prefix:":"},empty:{text:"jede Sekunde"},everyX:{prefix:"",text:"alle {{every.value}} Sekunden"}}},minute:{text:"Minute"},hour:{text:"Stunde",minute:{"*":{prefix:"zu",suffix:"Minute(n)"},empty:{text:"jeder"}}},day:{prefix:"Jeden",text:"Tag"},week:{text:"Woche"},month:{prefix:"Jedes",text:"Monat"},year:{prefix:"Jedes",text:"Jahr"},"q-second":{text:"Sekunde"},"q-minute":{text:"Minute",second:{"*":{prefix:"und"}}},"q-hour":{text:"Stunde",minute:{"*":{prefix:"und"}},second:{"*":{prefix:"und"}}}},qe={"*":{prefix:"Every",suffix:"",text:"Unknown","*":{empty:{text:"every {{field.id}}"},value:{text:"{{value.text}}"},range:{text:"{{start.text}}-{{end.text}}"},everyX:{text:"every {{every.value}}"}},month:{"*":{prefix:"in"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"}},day:{"*":{prefix:"on"},noSpecific:{text:"no specific day"}},dayOfWeek:{"*":{prefix:"on"},empty:{text:"every day of the week"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"},noSpecific:{text:"no specific day of the week"}},hour:{"*":{prefix:"at"}},minute:{"*":{prefix:":"}},second:{"*":{prefix:":"}}},minute:{text:"Minute"},hour:{text:"Hour",minute:{"*":{prefix:"at",suffix:"minute(s)"},empty:{text:"every"}}},day:{text:"Day"},week:{text:"Week"},month:{text:"Month",dayOfWeek:{"*":{prefix:"and"}}},year:{text:"Year",dayOfWeek:{"*":{prefix:"and"}}},"q-second":{text:"Second"},"q-minute":{text:"Minute",second:{"*":{prefix:"at",suffix:"second(s)"},empty:{text:"every"}}},"q-hour":{text:"Hour",minute:{"*":{prefix:"at"}}}},Re={"*":{prefix:"todos los",suffix:"",text:"Desconocido","*":{empty:{text:"todos los {{ field.id }}"},value:{text:"{{ value.text }}"},range:{text:"{{ start.text }}-{{ end.text }}"},everyX:{text:"todos/as {{ every.value }}"}},month:{"*":{prefix:"en"},empty:{text:"todos los meses"},value:{text:"{{ value.alt }}"},range:{text:"{{ start.alt }}-{{ end.alt }}"}},day:{"*":{prefix:"en"},empty:{text:"todos los días"},value:{text:"los días {{ value.alt }}"}},dayOfWeek:{"*":{prefix:"de"},empty:{text:"todos los días de la semana"},value:{text:"los {{ value.alt }}"},range:{text:"{{ start.alt }}-{{ end.alt }}"}},hour:{"*":{prefix:"a"},empty:{text:"todas las horas"},value:{text:"las {{ value.text }}"}},minute:{"*":{prefix:":"},empty:{text:"todos los minutos"}}},minute:{prefix:"todos los",text:"minutos"},hour:{prefix:"todas las",text:"horas",minute:{"*":{prefix:"a los",suffix:"minutos"},empty:{text:"todos",prefix:"a",suffix:"los minutos"}}},day:{text:"Días"},week:{text:"Semanas"},month:{text:"Meses",dayOfWeek:{"*":{prefix:"y"}}},year:{text:"años",dayOfWeek:{"*":{prefix:"y"}}}},Xe={"*":{prefix:"Todo(a)",suffix:"",text:"Desconhecido","*":{empty:{text:"todo {{field.id}}"},value:{text:"{{value.text}}"},range:{text:"{{start.text}}-{{end.text}}"},everyX:{text:"todo {{every.value}}"}},month:{"*":{prefix:"de"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"},empty:{text:"todo mês"}},day:{"*":{prefix:"no(s) dia(s)"},empty:{text:"todos"}},dayOfWeek:{"*":{prefix:"de"},empty:{text:"todos dias da semana"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"}},hour:{"*":{prefix:"às"},empty:{text:"cada hora"}},minute:{"*":{prefix:":"},empty:{text:"cada minuto"}}},minute:{text:"Minuto"},hour:{text:"Hora",minute:{"*":{prefix:"e",suffix:"minuto(s)"},empty:{text:"cada"}}},day:{text:"Dia"},week:{text:"Semana"},month:{text:"Mês",dayOfWeek:{"*":{prefix:"e de"}}},year:{text:"Ano",dayOfWeek:{"*":{prefix:"e de"}}}},B={empty:{},en:qe,de:Pe,pt:Xe,es:Re,da:Ue,zh:ne,"zh-cn":ne};class $e{constructor(e){d(this,"dict"),this.dict=e}getLocaleStr(...e){const n=e.map(r=>[r,"*"]);return ae(this.dict,...n)||""}render(e,n,r,i,a){const s=this.getLocaleStr(e,n,r,i);return O.render(s,a||{})}}function Fe(t,e){const[n]=t.split("-"),r=B[t.toLowerCase()]||B[n.toLowerCase()]||B.en,i=Q(r,e||{});return new $e(i)}function ze(t){const{period:e,field:n,initialCron:r="*",locale:i}=t,a=S(r),s=S(""),l=S([]),u=S(""),f=S(""),h=S(""),y=o=>{const p=o instanceof Y?o.segments:[o];u.value=p.map(m=>i.render(e.value.id,n.id,m.type,T.Text,{field:n,...m.items})).join(","),f.value=i.getLocaleStr(e.value.id,n.id,o.type,T.Prefix),h.value=i.getLocaleStr(e.value.id,n.id,o.type,T.Suffix)},x=o=>{const p=_(o,n);p!=null?(l.value=p.toArray(),y(p)):s.value=`${o} is not a valid cron segment (${n.id})`},W=o=>{if(a.value=="?"&&o.length==0)return;const p=ge(o,n);p!=null?(a.value=p.toCron(),y(p)):s.value=`failed to convert ${o} to cron (${n.id})`};x(r);const j=o=>{const p=Array.from(o).sort((m,v)=>m>v?1:-1);l.value=p};return b(a,o=>{x(o)}),b(l,o=>{W(o)}),b(e,()=>{const o=_(a.value,n);o!=null&&y(o)}),{id:n.id,items:n.items,cron:a,selected:l,error:s,select:j,text:u,prefix:f,suffix:h}}function ue(t,e="*"){return new Array(t).fill(e).join(" ")}function He(t){return t!==void 0}class Ne{constructor(){d(this,"locale","en"),d(this,"format","crontab")}initialValue(e,n="*"){return ue(e,n)}fields(e,n){const r=e=="quartz",i=he(n),a=s=>(l,{segmentMap:u})=>{if(l.cron.value=="?")return;const f=u.get(s);f&&(f.cron.value="?")};return[...r?[{id:"second",items:i.secondItems}]:[],{id:"minute",items:i.minuteItems},{id:"hour",items:i.hourItems},{id:"day",items:i.dayItems,onChange:r?a("dayOfWeek"):void 0,segmentFactories:r?[V.fromString,F.fromString,H.fromString,z.fromString,L.fromString]:void 0},{id:"month",items:i.monthItems},{id:"dayOfWeek",items:i.dayOfWeekItems,onChange:r?a("day"):void 0,segmentFactories:r?[V.fromString,F.fromString,H.fromString,z.fromString,L.fromString]:void 0}]}periods(e){const n=e=="quartz",r=n?[{id:"q-second",value:[]}]:[],i=n?["second"]:[],a=n?"q-":"";return[...r,{id:a+"minute",value:[...i]},{id:a+"hour",value:["minute",...i]},{id:"day",value:["hour","minute",...i]},{id:"week",value:["dayOfWeek","hour","minute",...i]},{id:"month",value:["day","dayOfWeek","hour","minute",...i]},{id:"year",value:["month","day","dayOfWeek","hour","minute",...i]}]}}function Je(t){const e=new Ne,n=t.locale??e.locale,r=t.format??e.format,{customLocale:i,fields:a=e.fields(r,n)}=t,s=t.initialValue??e.initialValue(a.length),l=Fe(n,i),u=(t.periods??e.periods(r)).map(c=>({...c,text:l.getLocaleStr(c.id,T.Text)})),f=u.find(c=>c.id==t.initialPeriod)??u[u.length-1],h=S(s),y=S(""),x=S(f),W=S(""),j=S(""),o=a.map(c=>ze({field:new pe(c),locale:l,period:x})),p=new Map(o.map(c=>[c.id,c])),m=re(()=>x.value.value.map(c=>{const g=p.get(c);if(He(g))return g;throw Error("${fieldId} not found")})),v=c=>{if(!c){h.value=ue(a.length);return}const g=c.split(" ");if(g.length!==a.length){y.value="invalid pattern";return}for(let w=0;w<g.length;w++)o[w].cron.value!=g[w]&&(o[w].cron.value=g[w]);y.value=""};v(s);const A=()=>{h.value=o.map(c=>x.value.value.includes(c.id)||c.cron.value=="?"?c.cron.value:"*").join(" ")},M=()=>{W.value=l.getLocaleStr(x.value.id,T.Prefix),j.value=l.getLocaleStr(x.value.id,T.Suffix)};return M(),b(h,v),b(x,()=>{A(),M()}),o.forEach((c,g)=>{b(c.cron,()=>{var w,C;(C=(w=a[g]).onChange)==null||C.call(w,c,{segmentMap:p}),A()}),b(c.error,w=>{y.value=w})}),{cron:h,error:y,segments:o,selected:m,period:{select:c=>{const g=u.map(w=>w.id).indexOf(c);g!=-1&&(x.value=u[g])},selected:x,items:u,prefix:W,suffix:j}}}const Be={modelValue:{type:String},initialPeriod:{type:String},format:{type:String},locale:{type:String},fields:{type:Array},periods:{type:Array},customLocale:{type:Object}},Ke=ie({name:"VueCronCore",props:Be,emits:["update:model-value","error"],setup(t,e){const{cron:n,error:r,selected:i,period:a}=Je(t);return b(n,s=>{e.emit("update:model-value",s)}),b(r,s=>{e.emit("error",s)}),b(()=>t.modelValue,s=>{s&&(n.value=s)}),()=>{var s,l;const u={error:r,fields:i.value.map(f=>({id:f.id,items:f.items,cron:f.cron.value,selectedStr:f.text.value,events:{"update:model-value":f.select},attrs:{modelValue:f.selected.value},prefix:f.prefix.value,suffix:f.suffix.value})),period:{attrs:{modelValue:a.selected.value.id},events:{"update:model-value":a.select},items:a.items,prefix:a.prefix.value,suffix:a.suffix.value}};return(l=(s=e.slots).default)==null?void 0:l.call(s,u)}}});function Qe(t){const{items:e}=t,n=new Set,r=S(0),i=()=>{r.value=r.value+1},a=u=>{e.indexOf(u)!=-1&&(n.add(u),i())},s=u=>n.has(u),l=u=>{n.delete(u)&&i()};return{values:n,add:a,toggle:u=>{s(u)?l(u):a(u)},has:s,remove:l,clear:()=>{n.clear(),i()},updated:r,equals:u=>{if(u.length!=n.size)return!1;for(const f of u)if(!n.has(f))return!1;return!0}}}function Ze(){return{items:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},cols:{type:Number,default:1},itemText:{type:[String,Function],default:"text"},itemValue:{type:[String,Function],default:"value"}}}function Ye(t){const{items:e,cols:n=1,multiple:r=!1,itemText:i="text",itemValue:a="value"}=t,s=Qe(t),l=r?S([]):S(null),u=S(""),f=o=>{r?s.toggle(o):(s.clear(),s.add(o))},h=o=>typeof a=="function"?a(o):o[a],y=o=>typeof i=="function"?i(o):o[i],x=new Map(e.map(o=>[h(o),o])),W=o=>{s.equals(o)||(s.clear(),o.forEach(p=>f(p)))},j=o=>{o=Array.isArray(o)?o:[o];const p=o.map(m=>x.get(m)).filter(m=>!!m);W(p)};return b(s.updated,()=>{const o=Array.from(s.values);l.value=r?o.map(h):h(o[0]),u.value=o.map(y).join(",")}),{...s,select:f,selected:l,selectedStr:u,itemRows:ye(e,n),setItems:W,setValues:j}}const _e=ie({name:"RenderlessSelect",props:{...Ze(),modelValue:{type:[String,Number,Array]},selection:{type:String},clearable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e,slots:n}){const r=Ye(t);b(r.selected,()=>{e("update:modelValue",r.selected.value)}),b(()=>t.modelValue,a=>{a&&r.setValues(a)},{immediate:!0});const i=re(()=>t.multiple?!Array.isArray(r.selected.value)||r.selected.value.length==0:!!r.selected.value);return()=>{var a;const s={selectedStr:t.selection||r.selectedStr.value,modelValue:t.modelValue,items:t.items,select:r.select,isSelected:r.has,clearable:t.clearable&&!i.value,clear:r.clear,cols:t.cols,rows:r.itemRows.length,itemRows:r.itemRows,multiple:t.multiple,itemText:t.itemText,itemValue:t.itemValue};return(a=n.default)==null?void 0:a.call(n,s)}}});export{Ze as B,Ke as H,Be as N,Ye as Q,_e as Z,Je as z};
