import{f as S,e as re,w as b,L as ie}from"./index-1505ce4e.js";var fe=Object.defineProperty,ce=(t,e,n)=>e in t?fe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,p=(t,e,n)=>(ce(t,typeof e!="symbol"?e+"":e,n),n),E=(t=>(t.Empty="empty",t.Value="value",t.Range="range",t.EveryX="everyX",t.Combined="combined",t.NoSpecific="noSpecific",t))(E||{}),T=(t=>(t.Prefix="prefix",t.Suffix="suffix",t.Text="text",t))(T||{});class de{constructor(e){p(this,"field"),p(this,"itemMap"),this.field=e,this.itemMap=this.field.items.reduce((n,r)=>(n[r.value]=r,n),{})}get id(){return this.field.id}get items(){return this.field.items}get onChange(){return this.field.onChange}get segmentFactories(){return this.field.segmentFactories}get min(){return this.items[0].value}get max(){return this.items[this.items.length-1].value}getItem(e){return this.itemMap[e]}}function pe(t,e,n=1){const r=[];for(let i=t;i<=e;i+=n)r.push(i);return r}class me{constructor(e,n,r=1){return p(this,"start"),p(this,"end"),p(this,"step"),this.start=e,this.end=n,this.step=r,new Proxy(this,{get:function(i,a){const o=typeof a=="string"?parseInt(a):a;return typeof o=="number"&&o>=0&&o<=i.length?i.start+i.step*o:Reflect.get(i,a)}})}get length(){return(this.end-this.start)/this.step+1}[Symbol.iterator](){let e=-1;return{next:()=>({value:this[++e],done:this[e+1]===void 0})}}}function I(t,e,n=i=>i+"",r=i=>i+""){const i=[];for(const a of new me(t,e))i.push({text:n(a),alt:r(a),value:a});return i}function he(t){return{secondItems:I(0,59,e=>N(e,2)),minuteItems:I(0,59,e=>N(e,2)),hourItems:I(0,23,e=>N(e,2)),dayItems:I(1,31),monthItems:I(1,12,e=>new Date(2021,e-1,1).toLocaleDateString(t,{month:"long"}),e=>new Date(2021,e-1,1).toLocaleDateString(t,{month:"short"})),dayOfWeekItems:I(0,6,e=>new Date(2021,0,3+e).toLocaleDateString(t,{weekday:"long"}),e=>new Date(2021,0,3+e).toLocaleDateString(t,{weekday:"short"}))}}function N(t,e){const n=t+"";return n.length<e?new Array(e-n.length).fill("0").join("")+t:n}function R(t){return t&&typeof t=="object"&&!Array.isArray(t)}function Q(t,...e){if(!R(t)||e.length===0)return;const n=e.shift();if(R(n))for(const[r,i]of Object.entries(n))R(i)?(R(t[r])||(t[r]={}),Q(t[r],n[r])):t[r]=n[r];return e.length>0&&Q(t,e),t}function ae(t,...e){if(e.length===0)return t;for(const n of e[0])if(n in t){const r=ae(t[n],...e.slice(1));if(r!==void 0)return r}}function xe(t){for(let e=1;e<t.length;e++)if(t[e-1]+1!==t[e])return!1;return!0}function ve(){throw new Error("not implemented")}function ye(t,e,n=!0){const r=[];for(let i=0;i<t.length;i+=e){const a=t.slice(i,i+e);for(;n&&a.length<e;)a.push(null);r.push(a)}return r}class F{constructor(e){p(this,"field"),p(this,"type",E.NoSpecific),this.field=e}toCron(){return"?"}toArray(){return[]}get items(){return{}}static fromString(e,n){return e!=="?"?null:new F(n)}}class V{constructor(e){p(this,"field"),p(this,"type",E.Empty),this.field=e}toCron(){return"*"}toArray(){return[]}get items(){return{}}static fromString(e,n){return e!=="*"?null:new V(n)}static fromArray(e,n){const{items:r}=n;if(e.length===0)return new V(n);if(e.length!==r.length)return null;for(const i of r)if(!e.includes(i.value))return null;return xe(r.map(i=>i.value))?new V(n):null}}const oe=class Z{constructor(e,n,r){p(this,"field"),p(this,"type",E.Range),p(this,"start"),p(this,"end"),this.field=e,this.start=n,this.end=r}toCron(){return`${this.start}-${this.end}`}toArray(){const e=this.start,n=this.end;return pe(e,n)}get items(){return{start:this.field.itemMap[this.start],end:this.field.itemMap[this.end]}}static fromString(e,n){if(!Z.re.test(e))return null;const{min:r,max:i}=n,a=e.split("-"),o=parseInt(a[0]),s=parseInt(a[1]);return o>s||o<r||s>i?null:new Z(n,o,s)}};p(oe,"re",/^\d+-\d+$/);let z=oe;const K=(t,e,n)=>{const r=t*Math.floor(e/t),i=[];for(let a=r;a<=n;a+=t)a>=e&&i.push(a);return i},se=class X{constructor(e,n){p(this,"field"),p(this,"type",E.EveryX),p(this,"every"),this.field=e,this.every=n}toCron(){return`*/${this.every}`}toArray(){const{min:e,max:n}=this.field;return K(this.every,e,n)}get items(){return{every:this.field.itemMap[this.every]}}static fromString(e,n){if(!X.re.test(e))return null;const[,r]=e.split("/"),i=parseInt(r),{min:a,max:o}=n;return K(i,a,o).length==0?null:new X(n,i)}static fromArray(e,n){const{min:r,max:i}=n;if(e.length<3)return null;const a=e[1]-e[0];if(a<=1)return null;const o=r%a===0?r:(Math.floor(r/a)+1)*a;if(e.length!==Math.floor((i-o)/a)+1)return null;for(const s of e)if(s%a!==0)return null;return new X(n,a)}};p(se,"re",/^\*\/\d+$/);let H=se;class L{constructor(e,n){p(this,"field"),p(this,"type",E.Value),p(this,"value"),this.field=e,this.value=n}toCron(){return`${this.value}`}toArray(){return[this.value]}get items(){return{value:this.field.itemMap[this.value]}}static fromString(e,n){const{min:r,max:i}=n,a=parseInt(e);return String(a)===e&&a>=r&&a<=i?new L(n,a):null}static fromArray(e,n){const{min:r,max:i}=n;if(e.length!=1)return null;const a=e[0];return a<r||a>i?null:a}}const le=class ${constructor(e,n=[]){p(this,"field"),p(this,"segments"),this.field=e,this.segments=n}get type(){return this.segments.length==1?this.segments[0].type:E.Range}addSegment(e){this.segments.push(e)}toCron(){return this.segments.map(e=>e.toCron()).join(",")}toArray(){const e=new Set;for(const n of this.segments)n.toArray().forEach(r=>e.add(r));return Array.from(e)}get items(){return ve()}static fromString(e,n){const r=n.segmentFactories??$.segmentFactories;let i=[];for(const a of e.split(",")){if(a==="*"){i=[new V(n)];break}let o=null;for(const s of r)if(o=s(a,n),o!==null)break;if(o===null)return null;i.push(o)}return new $(n,i)}static fromArray(e,n){const{min:r,max:i}=n,a=e[0],o=e[e.length-1];if(a<r||o>i)return null;const s=[];let l=0;for(let c=0;c<e.length;c++)(e[c+1]===void 0||e[c+1]-e[c]>1)&&(c===l?s.push(new L(n,e[l])):s.push(new z(n,e[l],e[c])),l=c+1);return new $(n,s)}};p(le,"segmentFactories",[V.fromString,H.fromString,z.fromString,L.fromString]);let Y=le;function _(t,e){return Y.fromString(t,e)}function ge(t,e){for(const n of[V.fromArray,H.fromArray,Y.fromArray]){const r=n(t,e);if(r!=null)return r}return null}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var we=Object.prototype.toString,U=Array.isArray||function(t){return we.call(t)==="[object Array]"};function G(t){return typeof t=="function"}function Se(t){return U(t)?"array":typeof t}function J(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function ee(t,e){return t!=null&&typeof t=="object"&&e in t}function ke(t,e){return t!=null&&typeof t!="object"&&t.hasOwnProperty&&t.hasOwnProperty(e)}var be=RegExp.prototype.test;function Ce(t,e){return be.call(t,e)}var Oe=/\S/;function We(t){return!Ce(Oe,t)}var je={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Ve(t){return String(t).replace(/[&<>"'`=\/]/g,function(e){return je[e]})}var Ae=/\s*/,Me=/\s+/,te=/\s*=/,Te=/\s*\}/,Ee=/#|\^|\/|>|\{|&|=|!/;function Ie(t,e){if(!t)return[];var n=!1,r=[],i=[],a=[],o=!1,s=!1,l="",c=0;function x(){if(o&&!s)for(;a.length;)delete i[a.pop()];else a=[];o=!1,s=!1}var y,v,W;function j(C){if(typeof C=="string"&&(C=C.split(Me,2)),!U(C)||C.length!==2)throw new Error("Invalid tags: "+C);y=new RegExp(J(C[0])+"\\s*"),v=new RegExp("\\s*"+J(C[1])),W=new RegExp("\\s*"+J("}"+C[1]))}j(e||O.tags);for(var u=new q(t),f,m,h,A,M,d;!u.eos();){if(f=u.pos,h=u.scanUntil(y),h)for(var g=0,w=h.length;g<w;++g)A=h.charAt(g),We(A)?(a.push(i.length),l+=A):(s=!0,n=!0,l+=" "),i.push(["text",A,f,f+1]),f+=1,A===`
`&&(x(),l="",c=0,n=!1);if(!u.scan(y))break;if(o=!0,m=u.scan(Ee)||"name",u.scan(Ae),m==="="?(h=u.scanUntil(te),u.scan(te),u.scanUntil(v)):m==="{"?(h=u.scanUntil(W),u.scan(Te),u.scanUntil(v),m="&"):h=u.scanUntil(v),!u.scan(v))throw new Error("Unclosed tag at "+u.pos);if(m==">"?M=[m,h,f,u.pos,l,c,n]:M=[m,h,f,u.pos],c++,i.push(M),m==="#"||m==="^")r.push(M);else if(m==="/"){if(d=r.pop(),!d)throw new Error('Unopened section "'+h+'" at '+f);if(d[1]!==h)throw new Error('Unclosed section "'+d[1]+'" at '+f)}else m==="name"||m==="{"||m==="&"?s=!0:m==="="&&j(h)}if(x(),d=r.pop(),d)throw new Error('Unclosed section "'+d[1]+'" at '+u.pos);return De(Le(i))}function Le(t){for(var e=[],n,r,i=0,a=t.length;i<a;++i)n=t[i],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(e.push(n),r=n));return e}function De(t){for(var e=[],n=e,r=[],i,a,o=0,s=t.length;o<s;++o)switch(i=t[o],i[0]){case"#":case"^":n.push(i),r.push(i),n=i[4]=[];break;case"/":a=r.pop(),a[5]=i[2],n=r.length>0?r[r.length-1][4]:e;break;default:n.push(i)}return e}function q(t){this.string=t,this.tail=t,this.pos=0}q.prototype.eos=function(){return this.tail===""};q.prototype.scan=function(t){var e=this.tail.match(t);if(!e||e.index!==0)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};q.prototype.scanUntil=function(t){var e=this.tail.search(t),n;switch(e){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,e),this.tail=this.tail.substring(e)}return this.pos+=n.length,n};function D(t,e){this.view=t,this.cache={".":this.view},this.parent=e}D.prototype.push=function(t){return new D(t,this)};D.prototype.lookup=function(t){var e=this.cache,n;if(e.hasOwnProperty(t))n=e[t];else{for(var r=this,i,a,o,s=!1;r;){if(t.indexOf(".")>0)for(i=r.view,a=t.split("."),o=0;i!=null&&o<a.length;)o===a.length-1&&(s=ee(i,a[o])||ke(i,a[o])),i=i[a[o++]];else i=r.view[t],s=ee(r.view,t);if(s){n=i;break}r=r.parent}e[t]=n}return G(n)&&(n=n.call(this.view)),n};function k(){this.templateCache={_cache:{},set:function(t,e){this._cache[t]=e},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}k.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};k.prototype.parse=function(t,e){var n=this.templateCache,r=t+":"+(e||O.tags).join(":"),i=typeof n<"u",a=i?n.get(r):void 0;return a==null&&(a=Ie(t,e),i&&n.set(r,a)),a};k.prototype.render=function(t,e,n,r){var i=this.getConfigTags(r),a=this.parse(t,i),o=e instanceof D?e:new D(e,void 0);return this.renderTokens(a,o,n,t,r)};k.prototype.renderTokens=function(t,e,n,r,i){for(var a="",o,s,l,c=0,x=t.length;c<x;++c)l=void 0,o=t[c],s=o[0],s==="#"?l=this.renderSection(o,e,n,r,i):s==="^"?l=this.renderInverted(o,e,n,r,i):s===">"?l=this.renderPartial(o,e,n,i):s==="&"?l=this.unescapedValue(o,e):s==="name"?l=this.escapedValue(o,e,i):s==="text"&&(l=this.rawValue(o)),l!==void 0&&(a+=l);return a};k.prototype.renderSection=function(t,e,n,r,i){var a=this,o="",s=e.lookup(t[1]);function l(y){return a.render(y,e,n,i)}if(s){if(U(s))for(var c=0,x=s.length;c<x;++c)o+=this.renderTokens(t[4],e.push(s[c]),n,r,i);else if(typeof s=="object"||typeof s=="string"||typeof s=="number")o+=this.renderTokens(t[4],e.push(s),n,r,i);else if(G(s)){if(typeof r!="string")throw new Error("Cannot use higher-order sections without the original template");s=s.call(e.view,r.slice(t[3],t[5]),l),s!=null&&(o+=s)}else o+=this.renderTokens(t[4],e,n,r,i);return o}};k.prototype.renderInverted=function(t,e,n,r,i){var a=e.lookup(t[1]);if(!a||U(a)&&a.length===0)return this.renderTokens(t[4],e,n,r,i)};k.prototype.indentPartial=function(t,e,n){for(var r=e.replace(/[^ \t]/g,""),i=t.split(`
`),a=0;a<i.length;a++)i[a].length&&(a>0||!n)&&(i[a]=r+i[a]);return i.join(`
`)};k.prototype.renderPartial=function(t,e,n,r){if(n){var i=this.getConfigTags(r),a=G(n)?n(t[1]):n[t[1]];if(a!=null){var o=t[6],s=t[5],l=t[4],c=a;s==0&&l&&(c=this.indentPartial(a,l,o));var x=this.parse(c,i);return this.renderTokens(x,e,n,c,r)}}};k.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(n!=null)return n};k.prototype.escapedValue=function(t,e,n){var r=this.getConfigEscape(n)||O.escape,i=e.lookup(t[1]);if(i!=null)return typeof i=="number"&&r===O.escape?String(i):r(i)};k.prototype.rawValue=function(t){return t[1]};k.prototype.getConfigTags=function(t){return U(t)?t:t&&typeof t=="object"?t.tags:void 0};k.prototype.getConfigEscape=function(t){if(t&&typeof t=="object"&&!U(t))return t.escape};var O={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){P.templateCache=t},get templateCache(){return P.templateCache}},P=new k;O.clearCache=function(){return P.clearCache()};O.parse=function(t,e){return P.parse(t,e)};O.render=function(t,e,n,r){if(typeof t!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+Se(t)+'" was given as the first argument for mustache#render(template, view, partials)');return P.render(t,e,n,r)};O.escape=Ve;O.Scanner=q;O.Context=D;O.Writer=k;const ne={"*":{prefix:"每",suffix:"",text:"未知","*":{empty:{text:"每 {{field.id}}"},value:{text:"{{value.text}}"},range:{text:"{{start.text}}-{{end.text}}"},everyX:{text:"每 {{every.value}}"}},month:{"*":{prefix:"的"},empty:{text:"每月"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"}},day:{"*":{prefix:"的"},empty:{text:"每日"},value:{text:"{{value.alt}}号"},range:{text:"{{start.alt}}号-{{end.alt}}号"}},dayOfWeek:{"*":{prefix:"的"},empty:{text:"一周的每一天"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"}},hour:{"*":{prefix:"的"},empty:{text:"每小时"}},minute:{"*":{prefix:":"},empty:{text:"每分钟"}}},minute:{text:"分"},hour:{text:"小时",minute:{"*":{prefix:":",suffix:"分钟"},empty:{text:"每"}}},day:{text:"天"},week:{text:"周",dayOfWeek:{"*":{prefix:"的"},empty:{text:"每天"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"}}},month:{text:"月",dayOfWeek:{"*":{prefix:"和"}},day:{"*":{prefix:"的"}}},year:{text:"年",dayOfWeek:{"*":{prefix:"和"}}}},Ue={"*":{prefix:"Hver",suffix:"",text:"Ukendt","*":{empty:{text:"hver {{field.id}}"},value:{text:"{{value.text}}"},range:{text:"{{start.text}}-{{end.text}}"},everyX:{text:"hver {{every.value}}"}},month:{"*":{prefix:"i"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"}},day:{"*":{prefix:"på"}},dayOfWeek:{"*":{prefix:"på"},empty:{text:"hver dag i ugen"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"}},hour:{"*":{prefix:"klokken"}},minute:{"*":{prefix:":"}}},minute:{text:"Minut"},hour:{text:"Time",minute:{"*":{prefix:"på de(t)",suffix:"minutter"},empty:{text:"hver"}}},day:{text:"Dag"},week:{text:"Uge"},month:{text:"Måned",dayOfWeek:{"*":{prefix:"og"}}},year:{text:"År",dayOfWeek:{"*":{prefix:"og"}}}},Pe={"*":{prefix:"Jede",suffix:"",text:"Unknown","*":{value:{text:"{{value.text}}"},range:{text:"{{start.text}}-{{end.text}}"},everyX:{text:"alle {{every.value}}"}},month:{"*":{prefix:"im"},empty:{prefix:"in",text:"jedem Monat"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"}},day:{"*":{prefix:"den"},empty:{prefix:"an",text:"jedem Tag"},everyX:{prefix:"",text:"alle {{every.value}} Tage"},noSpecific:{prefix:"an",text:"keinem bestimmten Tag"}},dayOfWeek:{"*":{prefix:"am"},empty:{prefix:"an",text:"jedem Wochentag"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"},noSpecific:{prefix:"und",text:"keinem bestimmten Wochentag"}},hour:{"*":{prefix:"um"},empty:{prefix:"zu",text:"jeder Stunde"},everyX:{prefix:"",text:"alle {{every.value}} Stunden"}},minute:{"*":{prefix:":"},empty:{text:"jede Minute"},everyX:{prefix:"",text:"alle {{every.value}} Minuten"}},second:{"*":{prefix:":"},empty:{text:"jede Sekunde"},everyX:{prefix:"",text:"alle {{every.value}} Sekunden"}}},minute:{text:"Minute"},hour:{text:"Stunde",minute:{"*":{prefix:"zu",suffix:"Minute(n)"},empty:{text:"jeder"}}},day:{prefix:"Jeden",text:"Tag"},week:{text:"Woche"},month:{prefix:"Jedes",text:"Monat"},year:{prefix:"Jedes",text:"Jahr"},"q-second":{text:"Sekunde"},"q-minute":{text:"Minute",second:{"*":{prefix:"und"}}},"q-hour":{text:"Stunde",minute:{"*":{prefix:"und"}},second:{"*":{prefix:"und"}}}},qe={"*":{prefix:"Every",suffix:"",text:"Unknown","*":{empty:{text:"every {{field.id}}"},value:{text:"{{value.text}}"},range:{text:"{{start.text}}-{{end.text}}"},everyX:{text:"every {{every.value}}"}},month:{"*":{prefix:"in"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"}},day:{"*":{prefix:"on"},noSpecific:{text:"no specific day"}},dayOfWeek:{"*":{prefix:"on"},empty:{text:"every day of the week"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"},noSpecific:{text:"no specific day of the week"}},hour:{"*":{prefix:"at"}},minute:{"*":{prefix:":"}},second:{"*":{prefix:":"}}},minute:{text:"Minute"},hour:{text:"Hour",minute:{"*":{prefix:"at",suffix:"minute(s)"},empty:{text:"every"}}},day:{text:"Day"},week:{text:"Week"},month:{text:"Month",dayOfWeek:{"*":{prefix:"and"}}},year:{text:"Year",dayOfWeek:{"*":{prefix:"and"}}},"q-second":{text:"Second"},"q-minute":{text:"Minute",second:{"*":{prefix:"at",suffix:"second(s)"},empty:{text:"every"}}},"q-hour":{text:"Hour",minute:{"*":{prefix:"at"}}}},Re={"*":{prefix:"todos los",suffix:"",text:"Desconocido","*":{empty:{text:"todos los {{ field.id }}"},value:{text:"{{ value.text }}"},range:{text:"{{ start.text }}-{{ end.text }}"},everyX:{text:"todos/as {{ every.value }}"}},month:{"*":{prefix:"en"},empty:{text:"todos los meses"},value:{text:"{{ value.alt }}"},range:{text:"{{ start.alt }}-{{ end.alt }}"}},day:{"*":{prefix:"en"},empty:{text:"todos los días"},value:{text:"los días {{ value.alt }}"}},dayOfWeek:{"*":{prefix:"de"},empty:{text:"todos los días de la semana"},value:{text:"los {{ value.alt }}"},range:{text:"{{ start.alt }}-{{ end.alt }}"}},hour:{"*":{prefix:"a"},empty:{text:"todas las horas"},value:{text:"las {{ value.text }}"}},minute:{"*":{prefix:":"},empty:{text:"todos los minutos"}}},minute:{prefix:"todos los",text:"minutos"},hour:{prefix:"todas las",text:"horas",minute:{"*":{prefix:"a los",suffix:"minutos"},empty:{text:"todos",prefix:"a",suffix:"los minutos"}}},day:{text:"Días"},week:{text:"Semanas"},month:{text:"Meses",dayOfWeek:{"*":{prefix:"y"}}},year:{text:"años",dayOfWeek:{"*":{prefix:"y"}}}},Xe={"*":{prefix:"Todo(a)",suffix:"",text:"Desconhecido","*":{empty:{text:"todo {{field.id}}"},value:{text:"{{value.text}}"},range:{text:"{{start.text}}-{{end.text}}"},everyX:{text:"todo {{every.value}}"}},month:{"*":{prefix:"de"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"},empty:{text:"todo mês"}},day:{"*":{prefix:"no(s) dia(s)"},empty:{text:"todos"}},dayOfWeek:{"*":{prefix:"de"},empty:{text:"todos dias da semana"},value:{text:"{{value.alt}}"},range:{text:"{{start.alt}}-{{end.alt}}"}},hour:{"*":{prefix:"às"},empty:{text:"cada hora"}},minute:{"*":{prefix:":"},empty:{text:"cada minuto"}}},minute:{text:"Minuto"},hour:{text:"Hora",minute:{"*":{prefix:"e",suffix:"minuto(s)"},empty:{text:"cada"}}},day:{text:"Dia"},week:{text:"Semana"},month:{text:"Mês",dayOfWeek:{"*":{prefix:"e de"}}},year:{text:"Ano",dayOfWeek:{"*":{prefix:"e de"}}}},B={empty:{},en:qe,de:Pe,pt:Xe,es:Re,da:Ue,zh:ne,"zh-cn":ne};class $e{constructor(e){p(this,"dict"),this.dict=e}getLocaleStr(...e){const n=e.map(r=>[r,"*"]);return ae(this.dict,...n)||""}render(e,n,r,i,a){const o=this.getLocaleStr(e,n,r,i);return O.render(o,a||{})}}function Fe(t,e){const[n]=t.split("-"),r=B[t.toLowerCase()]||B[n.toLowerCase()]||B.en,i=Q(r,e||{});return new $e(i)}function ze(t){const{period:e,field:n,initialCron:r="*",locale:i}=t,a=S(r),o=S(""),s=S([]),l=S(""),c=S(""),x=S(""),y=u=>{const f=u instanceof Y?u.segments:[u];l.value=f.map(m=>i.render(e.value.id,n.id,m.type,T.Text,{field:n,...m.items})).join(","),c.value=i.getLocaleStr(e.value.id,n.id,u.type,T.Prefix),x.value=i.getLocaleStr(e.value.id,n.id,u.type,T.Suffix)},v=u=>{const f=_(u,n);f!=null?(s.value=f.toArray(),y(f)):o.value=`${u} is not a valid cron segment (${n.id})`},W=u=>{if(a.value=="?"&&u.length==0)return;const f=ge(u,n);f!=null?(a.value=f.toCron(),y(f)):o.value=`failed to convert ${u} to cron (${n.id})`};v(r);const j=u=>{const f=Array.from(u).sort((m,h)=>m>h?1:-1);s.value=f};return b(a,u=>{v(u)}),b(s,u=>{W(u)}),b(e,()=>{const u=_(a.value,n);u!=null&&y(u)}),{id:n.id,items:n.items,cron:a,selected:s,error:o,select:j,text:l,prefix:c,suffix:x}}function ue(t,e="*"){return new Array(t).fill(e).join(" ")}function He(t){return t!==void 0}class Ne{constructor(){p(this,"locale","en"),p(this,"format","crontab")}initialValue(e,n="*"){return ue(e,n)}fields(e,n){const r=e=="quartz",i=he(n),a=o=>(s,{segmentMap:l})=>{if(s.cron.value=="?")return;const c=l.get(o);c&&(c.cron.value="?")};return[...r?[{id:"second",items:i.secondItems}]:[],{id:"minute",items:i.minuteItems},{id:"hour",items:i.hourItems},{id:"day",items:i.dayItems,onChange:r?a("dayOfWeek"):void 0,segmentFactories:r?[V.fromString,F.fromString,H.fromString,z.fromString,L.fromString]:void 0},{id:"month",items:i.monthItems},{id:"dayOfWeek",items:i.dayOfWeekItems,onChange:r?a("day"):void 0,segmentFactories:r?[V.fromString,F.fromString,H.fromString,z.fromString,L.fromString]:void 0}]}periods(e){const n=e=="quartz",r=n?[{id:"q-second",value:[]}]:[],i=n?["second"]:[],a=n?"q-":"";return[...r,{id:a+"minute",value:[...i]},{id:a+"hour",value:["minute",...i]},{id:"day",value:["hour","minute",...i]},{id:"week",value:["dayOfWeek","hour","minute",...i]},{id:"month",value:["day","dayOfWeek","hour","minute",...i]},{id:"year",value:["month","day","dayOfWeek","hour","minute",...i]}]}}function Je(t){const e=new Ne,n=t.locale??e.locale,r=t.format??e.format,{customLocale:i,fields:a=e.fields(r,n)}=t,o=t.initialValue??e.initialValue(a.length),s=Fe(n,i),l=(t.periods??e.periods(r)).map(d=>({...d,text:s.getLocaleStr(d.id,T.Text)})),c=l.find(d=>d.id==t.initialPeriod)??l[l.length-1],x=S(o),y=S(""),v=S(c),W=S(""),j=S(""),u=a.map(d=>ze({field:new de(d),locale:s,period:v})),f=new Map(u.map(d=>[d.id,d])),m=re(()=>v.value.value.map(d=>{const g=f.get(d);if(He(g))return g;throw Error("${fieldId} not found")})),h=d=>{if(!d){x.value=ue(a.length);return}const g=d.split(" ");if(g.length!==a.length){y.value="invalid pattern";return}for(let w=0;w<g.length;w++)u[w].cron.value!=g[w]&&(u[w].cron.value=g[w]);y.value=""};h(o);const A=()=>{x.value=u.map(d=>v.value.value.includes(d.id)||d.cron.value=="?"?d.cron.value:"*").join(" ")},M=()=>{W.value=s.getLocaleStr(v.value.id,T.Prefix),j.value=s.getLocaleStr(v.value.id,T.Suffix)};return M(),b(x,h),b(v,()=>{A(),M()}),u.forEach((d,g)=>{b(d.cron,()=>{var w,C;(C=(w=a[g]).onChange)==null||C.call(w,d,{segmentMap:f}),A()}),b(d.error,w=>{y.value=w})}),{cron:x,error:y,segments:u,selected:m,period:{select:d=>{const g=l.map(w=>w.id).indexOf(d);g!=-1&&(v.value=l[g])},selected:v,items:l,prefix:W,suffix:j}}}const Be={modelValue:{type:String},initialPeriod:{type:String},format:{type:String},locale:{type:String},fields:{type:Array},periods:{type:Array},customLocale:{type:Object}},Ke=ie({name:"VueCronCore",props:Be,emits:["update:model-value","error"],setup(t,e){const{cron:n,error:r,selected:i,period:a}=Je(t);return b(n,o=>{e.emit("update:model-value",o)}),b(r,o=>{e.emit("error",o)}),b(()=>t.modelValue,o=>{o&&(n.value=o)}),()=>{var o,s;const l={error:r,fields:i.value.map(c=>({id:c.id,items:c.items,cron:c.cron.value,selectedStr:c.text.value,events:{"update:model-value":c.select},attrs:{modelValue:c.selected.value},prefix:c.prefix.value,suffix:c.suffix.value})),period:{attrs:{modelValue:a.selected.value.id},events:{"update:model-value":a.select},items:a.items,prefix:a.prefix.value,suffix:a.suffix.value}};return(s=(o=e.slots).default)==null?void 0:s.call(o,l)}}});function Qe(t){const{items:e}=t,n=new Set,r=S(0),i=()=>{r.value=r.value+1},a=l=>{e.indexOf(l)!=-1&&(n.add(l),i())},o=l=>n.has(l),s=l=>{n.delete(l)&&i()};return{values:n,add:a,toggle:l=>{o(l)?s(l):a(l)},has:o,remove:s,clear:()=>{n.clear(),i()},updated:r,equals:l=>{if(l.length!=n.size)return!1;for(const c of l)if(!n.has(c))return!1;return!0}}}function Ze(){return{items:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},cols:{type:Number,default:1},itemText:{type:[String,Function],default:"text"},itemValue:{type:[String,Function],default:"value"}}}function Ye(t){const{items:e,cols:n=1,multiple:r=!1,itemText:i="text",itemValue:a="value"}=t,o=Qe(t),s=r?S([]):S(null),l=S(""),c=f=>{r?o.toggle(f):(o.clear(),o.add(f))},x=f=>typeof a=="function"?a(f):f[a],y=f=>typeof i=="function"?i(f):f[i],v=new Map(e.map(f=>[x(f),f])),W=f=>{o.equals(f)||(o.clear(),f.forEach(m=>c(m)))},j=f=>{f=Array.isArray(f)?f:[f];const m=f.map(h=>v.get(h)).filter(h=>!!h);W(m)};b(o.updated,()=>{const f=Array.from(o.values);s.value=r?f.map(x):x(f[0]),l.value=f.map(y).join(",")});const u=re(()=>r?!Array.isArray(s.value)||s.value.length==0:!!s.value);return{...o,select:c,selected:s,selectedStr:l,itemRows:ye(e,n),setItems:W,setValues:j,isEmpty:u}}const _e=ie({name:"RenderlessSelect",props:{...Ze(),modelValue:{type:[String,Number,Array]},selection:{type:String},clearable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e,slots:n}){const r=Ye(t);return b(r.selected,()=>{e("update:modelValue",r.selected.value)}),b(()=>t.modelValue,i=>{i&&r.setValues(i)},{immediate:!0}),()=>{var i;const a={selectedStr:t.selection||r.selectedStr.value,modelValue:t.modelValue,items:t.items,select:r.select,isSelected:r.has,clearable:t.clearable&&!r.isEmpty.value,clear:r.clear,cols:t.cols,rows:r.itemRows.length,itemRows:r.itemRows,multiple:t.multiple,itemText:t.itemText,itemValue:t.itemValue};return(i=n.default)==null?void 0:i.call(n,a)}}});export{Ze as B,Ke as H,Be as N,Ye as Q,_e as Z,Je as z};
